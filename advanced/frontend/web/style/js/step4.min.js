function img_check(a, b, c, d, e, f, g, h, i, j, k) {
    var l = $("#" + j).val();
    a = $("#" + f), this.AllowExt = ".jpg,.gif,.jpeg,.png,.pjpeg", this.FileExt = a.val().substr(a.val().lastIndexOf(".")).toLowerCase(), 0 != this.AllowExt && -1 == this.AllowExt.indexOf(this.FileExt) ? $("#" + g).text("只支持jpg、gif、png、jpeg格式，请重新上传").show() : ($("#" + g).text("").hide(), $.ajaxFileUpload({
        url: b,
        secureuri: !1,
        fileElementId: f,
        data: {
            type: l
        },
        dataType: "text",
        success: function(a) {
            "" != a ? ($("#" + k).val(a), $("#" + i + " img").attr("src", ctx + "/" + a), $("#" + h).hide(), $("#" + i).show()) : $("#" + g).text("上传失败，请重新上传").show()
        },
        error: function() {
            $("#" + g).text("上传失败，请重新上传").show()
        }
    }))
}
$(function() {
    $("#addMember").click(function() {
        var num = $(".photo").length;
        var a = $(".formWrapper").length,
            b = $("#companyId").val();
        2 == a && $(this).hide(), $("#productDiv").append('<div class="formWrapper">' + "<h3>产品海报</h3>"+'<input type="file" tt='+num+' class="photo" name="my[]"  onchange="previewFile()"/><img class="imgs"  style="display: none" src="" height="200" width="300" alt=""/>'+"<h3>产品名称</h3>" + '<input type="text" id="name' + a + '" name="company_product[]" placeholder="请输入产品名称" />' + "<h3>产品地址</h3>" + '<input type="text" id="address' + a + '" name="company_loadurl[]" placeholder="请输入产品主页URL或产品下载地址" />' + "<h3>产品简介</h3>" + '<textarea id="description' + a + '" name="company_desc[]" maxlength="1000" placeholder="请输入该创始人的个人履历等，建议按照时间倒序分条展示"></textarea>' + '<div class="word_count">你还可以输入 <span>500</span> 字</div>' + "</div>"), $(".formWrapper").each(function(b) {
            b != a && $(this).css({
                borderBottom: "1px solid #555",
                paddingBottom: "20px"
            })
        })
    }), $("#productDiv").on("keyup", "textarea", function() {
        var a = $(this);
        a.val().length > 500 ? a.val(a.val().substring(0, 500)) : a.siblings(".word_count").children("span").text(500 - a.val().length)
    }), $("#productForm").on("mouseenter", ".new_product input", function() {
        $(".product_upload div").css("backgroundColor", "#7e9597")
    }), $("#productForm").on("mouseleave", ".new_product input", function() {
        $(".product_upload div").css("backgroundColor", "#93b7bb")
    }), $("#productForm").validate({
        onkeyup: !1,
        focusCleanup: !0,
        rules: {
            "productInfos[0].product": {
                required: !1,
                minlength: 2,
                maxlenStr: 20
            },
            "productInfos[0].productUrl": {
                required: !1,
                checkUrlNot: !0,
                maxlength: 120
            },
            "productInfos[0].productProfile": {
                required: !1,
                specialchar: !0,
                checkNum: !0,
                minlength: 10,
                maxlength: 500
            },
            "productInfos[1].product": {
                required: !1,
                minlength: 2,
                maxlenStr: 20
            },
            "productInfos[1].productUrl": {
                required: !1,
                checkUrlNot: !0,
                maxlength: 120
            },
            "productInfos[1].productProfile": {
                required: !1,
                specialchar: !0,
                checkNum: !0,
                minlength: 10,
                maxlength: 500
            },
            "productInfos[2].product": {
                required: !1,
                minlength: 2,
                maxlenStr: 20
            },
            "productInfos[2].productUrl": {
                required: !1,
                checkUrlNot: !0,
                maxlength: 120
            },
            "productInfos[2].productProfile": {
                required: !1,
                specialchar: !0,
                checkNum: !0,
                minlength: 10,
                maxlength: 500
            }
        },
        messages: {
            "productInfos[0].product": {
                minlength: "请输入有效的产品名称",
                maxlenStr: "请输入有效的产品名称"
            },
            "productInfos[0].productUrl": {
                checkUrlNot: "请输入有效的产品主页或产品下载地址",
                maxlength: "请输入120字符以内的网址"
            },
            "productInfos[0].productProfile": {
                specialchar: "请输入有效的产品简介",
                checkNum: "请输入有效的产品简介",
                minlength: "请输入10-500字的产品简介",
                maxlength: "请输入10-500字的产品简介"
            },
            "productInfos[1].product": {
                minlength: "请输入有效的产品名称",
                maxlenStr: "请输入有效的产品名称"
            },
            "productInfos[1].productUrl": {
                checkUrlNot: "请输入有效的产品主页或产品下载地址",
                maxlength: "请输入120字符以内的网址"
            },
            "productInfos[1].productProfile": {
                specialchar: "请输入有效的产品简介",
                checkNum: "请输入有效的产品简介",
                minlength: "请输入10-500字的产品简介",
                maxlength: "请输入10-500字的产品简介"
            },
            "productInfos[2].product": {
                minlength: "请输入有效的产品名称",
                maxlenStr: "请输入有效的产品名称"
            },
            "productInfos[2].productUrl": {
                checkUrlNot: "请输入有效的产品主页或产品下载地址",
                maxlength: "请输入120字符以内的网址"
            },
            "productInfos[2].productProfile": {
                specialchar: "请输入有效的产品简介",
                checkNum: "请输入有效的产品简介",
                minlength: "请输入10-500字的产品简介",
                maxlength: "请输入10-500字的产品简介"
            }
        },
        submitHandler: function(a) {
            var b = $(a).find('input[type="text"]'),
                c = $(a).find("textarea");
            b.each(function() {
                $(this).val() == $(this).attr("placeholder") && $(this).val("")
            }), c.each(function() {
                $(this).text() == $(this).attr("placeholder") && $(this).text("")
            }), $(a).find(":submit").attr("disabled", !0), a.submit()
        }
    })
});